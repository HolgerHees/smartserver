sudo: required

branches:
  only:
    - master
    
services:
  - docker
  
before_install:
- docker pull opensuse/leap:15.1
- docker run -d --name suse opensuse/leap:15.1
- docker ps

script:
- docker exec -i suse sh -c "ip a"
- docker exec -i suse -c "zypper install -y ansible git"
- docker exec -i suse sh -c "cd /root/; git clone https://github.com/HolgerHees/smartserver.git"
- docker exec -i suse sh -c "cd /root/smartserver; ansible-playbook -i config/demo/server.ini --ask-vault-pass server.yml"
