language: ruby
os: linux
dist: bionic

sudo: required

branches:
  only:
    - master
    
before_install:
- sudo apt-get update -q
- sudo apt install linux-headers-$(uname -r)
- sudo apt-get -y install virtualbox
- sudo wget -nv https://releases.hashicorp.com/vagrant/2.2.6/vagrant_2.2.6_x86_64.deb
- sudo dpkg -i vagrant_2.2.6_x86_64.deb

jobs:
  include:
  - env: 
    - OS=suse
    - ANSIBLE_ARGS=
  - env: 
    - OS=fedora
    - ANSIBLE_ARGS=-v
    
script:
- vagrant --config=demo --os=$OS --ansible=$ANSIBLE_ARGS up
