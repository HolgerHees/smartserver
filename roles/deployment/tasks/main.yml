- name: check if deployment directory exists
  stat:
    path: "{{deployment_path}}"
  register: deployment_stat_result
        
- name: clone deployment git
  vars:
    git_clone_name: "deployment"
    git_clone_path: "{{deployment_path}}"
    git_clone_url: "{{vault_deployment_config_git}}"
  import_tasks: roles/_shared/tasks/git_clone.yml
  when: "ansible_connection != 'local' or not deployment_stat_result.stat.exists"
