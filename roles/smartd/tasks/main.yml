- name: install required fedora packages
  yum:
    name: "smartmontools"
    state: present
  notify: "restart smartd"
  when: ansible_distribution == 'Fedora'
  
- name: install required suse packages
  zypper:
    name: "smartmontools"
    state: present
  notify: "restart smartd"
  when: ansible_distribution == 'openSUSE Leap'

- name: copy config
  template:
    src: roles/smartd/templates/smartd.conf
    dest: /etc/smartd.conf
    owner: root
    group: root
    mode: 0640
  notify: "restart smartd"
