global: 
  smtp_smarthost: postfix:25
  smtp_require_tls: False
  smtp_from: {{root_email}}
  resolve_timeout: 60m

#templates:
#  - /etc/alertmanager/templates/*.tmpl

route:
  group_by: 
    - group
    - alertname
#    - log
  group_wait: 1m
  group_interval: 1m
  repeat_interval: 5m
  receiver: email-receiver
  routes:
    - matchers:
      - group="netdata"
      receiver: dummy
    - matchers:
      - group="crony"
      receiver: dummy
    - matchers:
      - group="php"
      - log=~".*oops, unknown child \([0-9]*\) exited with code 127.*"
      receiver: dummy
    - matchers:
      - group="apache"
      - log=~".*/grafana/api/live/ws.*Mobile.*"
      receiver: dummy
    - matchers:
      - group="apache"
      - log=~".*/update_service/api.php.*503.*"
      receiver: dummy
    - matchers:
      - group="apache"
      - log=~".*/cgi-bin/.%2e/.*"
      receiver: dummy

receivers:
  - name: dummy
  - name: email-receiver
    email_configs:
      - to: {{root_email}}
        headers:
          Reply-To: '{{root_email}}'
          subject: '{{'{{'}} .Status | toUpper {{'}} • {{'}} .GroupLabels.SortedPairs.Values | join " • " {{'}}{{'}} if eq .Status "firing" {{'}} • {{'}} .Alerts.Firing | len {{'}}'}} time(s){{'{{'}} end {{'}}'}}'
#          send_resolved: true
#        html: ''
#        text: ''
