- name: install required packages => is_fedora
  yum:
    name: "samba"
    state: present
  notify: "restart samba"
  when: is_fedora|bool

- name: install required packages => is_suse
  zypper:
    name: "samba"
    state: present
  notify: "restart samba"
  when: is_suse|bool
  
- name: copy config
  template:
    src: roles/samba/templates/smb.conf
    dest: /etc/samba/smb.conf
    owner: root
    group: root
    mode: 0640
  notify: "restart samba"

# ***** FINALIZE *****
- name: register smb systemd service watcher
  vars:
    name: "smb"
  import_tasks: roles/systemd_watcher/tasks/add_watcher.yml

- name: register nmb systemd service watcher
  vars:
    name: "nmb"
  import_tasks: roles/systemd_watcher/tasks/add_watcher.yml
