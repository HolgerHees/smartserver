<LocationMatch "/webapp/manifest.json">
  <RequireAny>
    Require all granted
  </RequireAny>
</LocationMatch>

<LocationMatch "/main/manifest.json">
  <RequireAny>
    Require all granted
  </RequireAny>
</LocationMatch>

<Location /cameraStrasseImage>
  ProxyPass balancer://cameraStrasseBalancer/tmpfs/snap.jpg
  RequestHeader set Authorization "Basic {{vault_camera_basic_auth}}"
</Location>

<Location /cameraStrasseImageResized>
  RewriteRule ^(.*)$ /resize.php?url=https://{{server_domain}}/cameraStrasseImage&auth={{vault_camera_basic_auth}} [QSA,L]
</Location>

<Location /cameraStrasseVideo>
  ProxyPass balancer://cameraStrasseBalancer/mjpegstream.cgi?-chn=11
  RequestHeader set Authorization "Basic {{vault_camera_basic_auth}}"
</Location>

<Proxy balancer://cameraStrasseBalancer>
  BalancerMember http://{{camera_streedside_ip}} timeout=5 retry=300
  BalancerMember https://127.0.0.1/fallback status=+H
  ProxySet lbmethod=bytraffic
</Proxy> 

<Location /cameraStrasseDevice/>
  ProxyPass http://{{camera_streedside_ip}}/
  RequestHeader set Authorization "Basic {{vault_camera_basic_auth}}"

  AddOutputFilterByType SUBSTITUTE application/x-javascript
  Substitute "s|http://|https://|ni"
  Substitute "s|param.cgi|cameraStrasseDevice/param.cgi|ni"
  Substitute "s|mjpegstream.cgi|cameraStrasseDevice/mjpegstream.cgi|ni"
</Location>

<Location /cameraAutomowerImage>
  ProxyPass balancer://automowerBalancer/cam.jpg
  RequestHeader set Authorization "Basic {{vault_automower_basic_auth}}"
</Location>

<Location /cameraAutomowerImageResized>
  RewriteRule ^(.*)$ /resize.php?url=https://{{server_domain}}/cameraAutomowerImage [QSA,L]
</Location>

<Location /cameraAutomowerVideo>
  ProxyPass balancer://automowerBalancer/cam.mjpg
  RequestHeader set Authorization "Basic {{vault_automower_basic_auth}}"
</Location>

<Proxy balancer://automowerBalancer>
  BalancerMember http://{{automower_ip}} timeout=5 retry=300
  BalancerMember https://127.0.0.1/fallback status=+H
  ProxySet lbmethod=bytraffic
</Proxy> 

<Location /automowerDevice>
  ProxyPass http://{{automower_ip}}
  RequestHeader set Authorization "Basic {{vault_automower_basic_auth}}"
</Location>

<Location /redirectToPvInverterGarage>
  RewriteEngine On
  RewriteRule / https://{{pv_inverter_garage_ip}}
</Location>

<Location /redirectToPrinterLaserJet>
  RewriteEngine On
  RewriteRule / https://{{printer_ip}}
</Location>

<Location /redirectToFritzBox>
  RewriteEngine On
  RewriteRule / https://{{server_gateway}}
</Location>
