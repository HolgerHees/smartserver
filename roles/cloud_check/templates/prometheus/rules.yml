groups:
- name: cloud_check
  rules:
  - alert: Cloud NFS availability
    expr: 'cloud_check_peer_mount_state{job="cloud_check"} == 0'
    for: 0m
    labels:
      notifyGroup: "cloud-nfs"
      severity: critical
    annotations:
      summary: "Cloud NFS of peer '{{'{{'}} $labels.peer {{'}}'}}'"

  - alert: Cloud MQTT availability
    expr: 'cloud_check_peer_mqtt_state{job="cloud_check"} == 0'
    for: 0m
    labels:
      notifyGroup: "cloud-mqtt"
      severity: error
    annotations:
      summary: "Cloud MQTT of peer '{{'{{'}} $labels.peer {{'}}'}}'"

  - alert: Cloud Peer availability
    expr: 'cloud_check_peer_online_state{job="cloud_check"} == 0 or cloud_check_peer_online_state{job="cloud_check"} == 1'
    for: 5m
    labels:
      notifyGroup: "cloud-peer-{{'{{'}} $labels.peer {{'}}'}}"
      severity: error
    annotations:
      summary: "Cloud peer '{{'{{'}} $labels.peer {{'}}'}}'"


