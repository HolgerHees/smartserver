groups:
- name: cloud_check
  rules:
  - alert: NFS availability
    expr: 'cloud_check_peer_mount_state{job="cloud_check"} != 1 and cloud_check_peer_mount_state{job="cloud_check"} != -1'
    for: 0m
    labels:
      notifyGroup: "cloud-nfs"
    annotations:
      summary: "Cloud NFS of peer '{{'{{'}} $labels.peer {{'}}'}}'"

  - alert: MQTT availability
    expr: 'cloud_check_peer_mqtt_state{job="cloud_check"} != 1 and cloud_check_peer_mqtt_state{job="cloud_check"} != -1'
    for: 0m
    labels:
      notifyGroup: "cloud-mqtt"
    annotations:
      summary: "Cloud MQTT of peer '{{'{{'}} $labels.peer {{'}}'}}'"

  - alert: Peer availability
    expr: 'cloud_check_peer_online_state{job="cloud_check"} != 2 and cloud_check_peer_online_state{job="cloud_check"} != -1'
    for: 5m
    labels:
      notifyGroup: "cloud-peer-{{'{{'}} $labels.peer {{'}}'}}"
    annotations:
      summary: "Cloud peer '{{'{{'}} $labels.peer {{'}}'}}'"


