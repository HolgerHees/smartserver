<source>
  @type tail
  tag openhab
  path {{global_log}}openhab/openhab.log
  pos_file {{global_log}}openhab/openhab.fluentd.pos
  <parse>
      @type multiline
      format_firstline /^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}/
      format1 /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}) \[(?<level>[^\s\]]+)\s*\] \[(?<class>[^\s\]]+)\s*\] - (?<message>.*)/
  </parse>
</source>

<filter openhab>
  @type record_modifier
  <record>
      group openhab
  </record>
</filter>

<source>
  @type tail
  tag openhab_events
  path {{global_log}}openhab/events.log
  pos_file {{global_log}}openhab/events.fluentd.pos
  <parse>
      @type regexp
      expression /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}) \[(?<level>[^\s\]]+)\s*\] \[(?<class>[^\s\]]+)\s*\] - (?<message>.*)/
  </parse>
</source>

<filter openhab_events>
  @type record_modifier
  <record>
      group openhab_events
  </record>
</filter>

<filter systemd.dockerd.openhab.error>
  @type record_modifier
  <record>
    level INFO
  </record>
</filter>
